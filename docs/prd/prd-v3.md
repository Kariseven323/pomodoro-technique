# 番茄钟 PRD v3

## 版本概述

新增调试模式，一键生成历史数据，用于验证历史记录页面 UI。

## 功能需求

### 1. 调试模式入口

**入口位置：**

- 设置页面底部「开发者选项」区域
- 仅开发环境可见（生产构建隐藏）

### 2. 一键生成历史数据

**功能描述：**

- 快速生成指定天数的番茄历史记录
- 用于验证历史记录页面、热力图、统计图表等 UI

**生成参数：**
| 参数 | 默认值 | 说明 |
|------|--------|------|
| 天数 | 30 | 生成多少天的数据（1-365） |
| 每日番茄数 | 4-8 | 随机范围 |

**生成规则：**

- 时间分布：9:00-12:00, 14:00-18:00
- 周末数据量减少 50%
- 标签从现有标签列表随机选取
- 自动填充 `startTime`、`endTime`、`duration`、`phase`

**交互流程：**

1. 点击「生成测试数据」按钮
2. 输入天数
3. 确认生成
4. 自动刷新历史页面

### 3. 清除测试数据

**功能描述：**

- 一键清除所有历史记录
- 用于重置后重新测试

## 数据结构

调试数据直接写入 `history_dev` 字段，与正式数据隔离：

```json
{
  "history": [],
  "history_dev": [
    {
      "date": "2025-01-01",
      "records": [...]
    }
  ]
}
```

## 新增 Tauri 命令

| 命令                     | 参数        | 返回   | 说明                         |
| ------------------------ | ----------- | ------ | ---------------------------- |
| `debug_generate_history` | `days: u32` | `u32`  | 生成历史数据，返回生成记录数 |
| `debug_clear_history`    | -           | `bool` | 清除 `history_dev`           |

## 新增前端组件

| 组件                  | 说明                              |
| --------------------- | --------------------------------- |
| `DebugSection.svelte` | 设置页调试区域，包含生成/清除按钮 |
