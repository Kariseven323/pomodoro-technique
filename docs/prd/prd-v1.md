# 番茄钟 PRD v1

## 产品概述

Windows 平台番茄钟应用，核心特色是「专注模式下自动终止干扰程序」。

## 技术栈

| 层 | 选型 |
|---|---|
| 框架 | Tauri 2.x |
| 前端 | Svelte 5 + TypeScript |
| 样式 | Tailwind CSS（iOS 风格） |
| 存储 | tauri-plugin-store |
| 通知 | tauri-plugin-notification |

## 功能需求

### 1. 进程黑名单管理（核心）

**功能描述：**
- 获取当前 Windows 运行的进程列表
- 用户可勾选进程加入黑名单
- 番茄钟启动时自动终止黑名单中的进程
- 番茄周期内可动态添加新进程到黑名单并立即终止
- 番茄周期内仅能添加新进程，而不可以移除旧进程
- 黑名单持久化存储

**交互流程：**
1. 用户点击「管理黑名单」
2. 显示当前运行进程列表（进程名 + 图标）
3. 勾选/取消勾选进程
4. 保存后生效

**权限策略：**
- 默认以普通用户权限运行（无需 UAC 确认）
- 普通权限可终止用户启动的常规应用（微信、QQ、浏览器、游戏等）
- 终止进程失败时，提示「该程序需要管理员权限才能终止」
- 提供「以管理员身份重启」按钮，用户可按需提权

### 2. 计时器

**功能描述：**
- 番茄时钟倒计时（默认 25 分钟）
- 短休息倒计时（默认 5 分钟）
- 长休息倒计时（默认 15 分钟，每 4 个番茄后触发）
- 开始 / 暂停 / 重置 / 跳过

**自定义设置：**
- 番茄时长：1-60 分钟
- 短休息时长：1-30 分钟
- 长休息时长：1-60 分钟
- 长休息间隔：1-10 个番茄

### 3. 任务标签

**功能描述：**
- 为当前番茄添加任务标签
- 支持新建/选择已有标签
- 标签历史记录持久化
- 今日完成统计按标签分组显示

### 4. 状态显示

**主界面显示：**
- 当前阶段（工作/短休息/长休息）
- 剩余时间（分:秒）
- 当前任务标签
- 今日完成番茄数

### 5. 系统集成

**系统托盘：**
- 最小化到托盘
- 托盘图标显示剩余时间
- 右键菜单：开始/暂停/显示窗口/退出

**通知：**
- 计时结束时系统通知
- 通知内容：阶段完成提示 + 下一阶段预告

## 数据结构

```json
{
  "settings": {
    "pomodoro": 25,
    "shortBreak": 5,
    "longBreak": 15,
    "longBreakInterval": 4
  },
  "blacklist": [
    { "name": "WeChat.exe", "displayName": "微信" },
    { "name": "QQ.exe", "displayName": "QQ" }
  ],
  "tags": ["工作", "学习", "阅读", "写作"],
  "history": [
    {
      "date": "2025-01-01",
      "records": [
        { "tag": "工作", "startTime": "09:00", "duration": 25 }
      ]
    }
  ]
}
```

## UI 风格

- iOS 风格设计
- 毛玻璃效果（backdrop-filter: blur）
- 大圆角卡片（12-22px）
- 系统字体（-apple-system, Segoe UI）
- 支持浅色/深色模式

## 第一版范围外（后续迭代）

- 数据统计图表
- 云同步
- 快捷键支持
- 白噪音/专注音乐
- 番茄完成动画
